---
title: "UserGuide"
format: html
editor: visual
---

## bulktrends User Guide

Examples of how to use the `bulktrends` package. First, let's load all of the functions contained within the package.

```{r}
#| code-fold: true

library(data.table)
library(devtools)
devtools::load_all("../")
```

## Load UK Trade Info Bulk Data Files

Load a single bulk data file or all of the files in a directory (and subdirectories).

```{r}
if (file.exists("../data/imports.rds")) {
  readRDS("../data/imports.rds")
} else {
  imports <- read_uktradeinfo( path = "../data/imports/")
  saveRDS(imports, file = "../data/imports.rds")
}

head(imports)

```

## Request Data from UK Trade Data API

Download look-up tables, e.g. for commodity codes and ports, and save, or load if already available.

```{r}
lookup_tables <- c("Commodity","Port")
for ( i in lookup_tables ) {
  
  file <- paste0("../data/",i,".rds")
  
  if( file.exists(file) ){
    readRDS(file)
  
    } else {
    assign(i, uktrades_request(endpoint = i)$value)
    saveRDS(get(i), file = file)  
    
    }
}

```

## Quick visualisation

-   Plot time series of a single commodity

-   Plot the time time series of all commodities in "chapter"

```{r}
# ggplot(...)
```

```{r}
# ggplot
```
